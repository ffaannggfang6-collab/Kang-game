<!DOCTYPE html>
<html lang="th">
<meta charset="UTF-8">
<title>KANG GAME DEMO</title>
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

<h2>ไพ่แคง DEMO</h2>

<input id="name" placeholder="ชื่อผู้เล่น">
<button onclick="login()">เข้าเกม</button>

<div id="lobby" style="display:none">
  <button onclick="join(20)">ห้อง 20</button>
  <button onclick="join(50)">ห้อง 50</button>
</div>

<div id="game" style="display:none">
  <h3>ไพ่ในมือ</h3>
  <pre id="hand"></pre>
  <button onclick="draw()">จั่ว</button>
  <button onclick="kang()">แคง</button>
</div>

<script>
const socket = io();
let room = 0;

function login(){
  socket.emit('login', name.value);
}

socket.on('login_success',()=>{
  lobby.style.display='block';
});

function join(r){
  room=r;
  socket.emit('join_room',r);
}

socket.on('game_start',d=>{
  game.style.display='block';
});

socket.on('hand_update',h=>{
  hand.innerText=JSON.stringify(h,null,2);
});

function draw(){ socket.emit('draw',room); }
function kang(){ socket.emit('kang',room); }

socket.on('game_over',d=>{
  alert(d.win ? `ชนะ +${d.net}` : 'แคงพลาด');
});
</script>
</html>
